{% extends 'master' %}

{% block content %}
<div class="wrapper">
    <div class="page-header clear-filter" filter-color="orange">
        <div class="page-header-image" data-parallax="true"></div>
        <div class="container">
            <div class="row" style="padding-top:90px">
                <div class="col-md-12 animsition" data-animsition-in-class="fade-in-down-sm" data-animsition-in-duration="500">
                    <div class="row">
                        <div class="col-lg-6 col-md-12">
                            <h4 class="category">Faculty Dashboard | Coordinator</h4>
                        </div>
                        <div class="col-lg-2">
                            <div class="dropdown">
                                <a href="#pablo" class="btn btn-primary btn-round dropdown-toggle" data-toggle="dropdown" id="navbarDropdownMenuLink1">
                                    <strong> More options</strong>
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink1">
                                    <a class="dropdown-item" href="/adviserDashboard">Adviser page</a>
                                    <a class="dropdown-item" href="#">Panelist page</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" data-toggle="modal" data-target="#groupControl" href="#">Create groups</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" data-toggle="modal" data-target="#projectControl">Create Project</a>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!--Recent endorsements from Adviser Tables Start-->
                    <div class="card">
                        <div class="card-header bg-primary">
                            <ul class="nav nav-tabs nav-tabs-neutral">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" role="tab">
                                        Recent endorsements
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <table class="table table-hover table-responsive">
                                {% if currentUser %}
                                <thead class="text-primary">
                                    <th><strong>Group</strong></th>
                                    <th><strong>Proposal | Endorse</strong></th>
                                    <th><strong>Activity</strong></th>
                                    <th><strong>Endorsed By</strong></th>
                                    <th><strong>Endorse Date</strong></th>
                                    <th><strong>Remarks</strong></th>
                                    <th><strong>&nbsp;</strong></th>
                                </thead>
                                <tbody>
                                    {% for item in endorse %}
                                    <tr class="text-black">
                                        <td>{{item.groupId}}</td>
                                        <td>{{item.description}}</td>
                                        <td>{{item.endorseType}}</td>
                                        <td>{{item.endorseBy}}</td>
                                        <td>{{item.created_at}}</td>
                                        <td>{{item.notes}}</td>
                                        <td>
                                            <div class="dropdown">
                                                <a href="#" data-toggle="modal" data-target="#{{item.groupId}}"  class="btn btn-primary btn-round">
                                                    <strong>Endorse for </strong>
                                                </a>
                                            </div>

                                            <div class="modal fade" id="{{item.groupId}}" role="dialog">
                                                <div class="modal-dialog">
                                                    <!-- Modal content -->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Create Endorsement</h5>
                                                            <a class="nav nav-link nav-pills nav-pills-success"
                                                               data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
                                                            </a>
                                                        </div>

                                                        <div class="modal-body">
                                                            <form class="form-horizontal" role="form" method="POST" action="/submitEndorsement">

                                                                {{ csrfField }}

                                                                {% for gc in groupControl %}
                                                                    <input id="endorseTo" name="endorseTo" value={{gc.chairman}} style="display:none;" />
                                                                {% endfor %}

                                                                <input id="studentId" name="studentId" value="{{currentUser.personal_code}}" style="display:none"/>
                                                                <input id="groupId" type="number" class="form-control" name="groupId" value={{item.groupId}} style="display:none;">

                                                                <div class="col-lg-12">
                                                                    <label for="endorsedBy" class="col-lg-12 control-label">Created by</label>
                                                                    <div class="form-group">
                                                                        <input id="endorsedBy" type="email" class="form-control" name="endorsedBy" value="{{currentUser.email}}" disabled>
                                                                    </div>
                                                                </div>

                                                                <div class="col-lg-12">
                                                                    <label for="endorsedBy" class="col-lg-12 control-label">For Group</label>
                                                                    <div class="form-group">
                                                                        <input type="number" class="form-control" value={{item.groupId}} disabled>
                                                                    </div>
                                                                </div>

                                                                <div class="col-lg-12">
                                                                    <label for="project" class="col-lg-12 control-label">Description</label>
                                                                    <div class="form-group">
                                                                        <input id="description" type="text" class="form-control" name="description" placeholder="Describe here..." required/>
                                                                    </div>
                                                                </div>

                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <select class="selectpicker" id="endorseType" name="endorseType" data-style="btn btn-primary btn-round btn-md" required>
                                                                            <option disabled selected>Endorse for</option>
                                                                            <option value='Panel meeting'>Panel meeting</option>
                                                                            <option value='Milestone checking'>Milestone checking</option>
                                                                            <option value='Proposal defense'>Proposal defense</option>
                                                                            <option value='Final defense'>Final defense</option>
                                                                        </select>
                                                                    </div>
                                                                </div>

                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label for="project" class="col-lg-12 control-label">Deadline / Meeting</label>
                                                                        <input type="text" class="form-control datetimepicker" name="deadline" required/>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12">
                                                                    <textarea id="notes" type="text" class="form-control" name="notes" placeholder="Additional remarks..." rows="3" required></textarea>
                                                                </div>

                                                                <div class="footer text-center">
                                                                   <button type="submit" class="btn btn-primary btn-round btn-md">Save</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                                {% endif %}
                            </table>
                        </div>
                    </div>
                    <!--Recent endorsements from Adviser Tables End-->



                    <!-- Project Requirements Tab Start-->
                    <div class="card">
                        <div class="card-header bg-primary">
                            <ul class="nav nav-tabs nav-tabs-neutral">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" role="tab">
                                        Projects
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="card-body">
                            <table class="table table-hover table-responsive">
                                {% if currentUser %}
                                <thead class="text-primary">
                                    <th><strong>Group Id</strong></th>
                                    <th><strong>Group Name</strong></th>
                                    <th><strong>Project ID</strong></th>
                                    <th><strong>Project Name</strong></th>
                                </thead>
                                <tbody>
                                    {% for p in projects %}
                                    <tr class="text-black">
                                        <td>{{p.groupId}}</td>
                                        <td>{{p.groupName}}</td>
                                        <td>{{p.id}}</td>
                                        <td>{{p.projectname}}</td>
                                        <td>
                                            <button class="btn btn-primary btn-md btn-round" data-toggle="modal" data-target="#{{p.id}}req" href="#"><strong>ADD Requirements</strong></button>
                                            <!--Add Must Have Requirements-->
                                            <div class="modal fade" id="{{p.id}}req" role="dialog">
                                                <div class="modal-dialog">
                                                    <!-- Modal content -->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Create Must Have Requirements</h5>
                                                            <a class="nav nav-link nav-pills nav-pills-success" data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
																														</a>
                                                        </div>
                                                        <div class="modal-body">
                                                            <!--Error-->
                                                            {% if old('error') %}
                                                            <div class="text-danger">
                                                                {{ old('error') }}
                                                            </div>
                                                            {% endif %}
                                                            <!--Success-->
                                                            {% if old('success') %}
                                                            <div class="text-success">
                                                                {{ old('success') }}
                                                            </div>
                                                            {% endif %}
                                                            <form class="form-horizontal" role="form" method="POST" action="/insertMustHave">

                                                                {{ csrfField }}
                                                                <!--Requirements-->
                                                                <div class="form-group">
                                                                    <div class="col-md-4">
                                                                        <label for="groupname" class="text-muted">Project Id</label>
                                                                        <input type="text" class="form-control" value="{{p.id}}" disabled>
                                                                        <input id="pid" name="pid" type="text" class="form-control" value="{{p.id}}" style='display:none'>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <div class="col-md-12">
                                                                        <label for="groupname" class="text-muted">Must Have</label>
                                                                        <input id="must" name="must" type="text" class="form-control" required>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label for="lastname" class="col-md-10 text-muted">Estimated Deadline</label>
                                                                    <div class="col-md-12">
                                                                        <input id="deadline" type="text" class="form-control datetimepicker" placeholder="Start Date" name="deadline" required>
                                                                    </div>
                                                                </div>

                                                                <div class="footer text-center">
                                                                    <button type="submit" class="btn btn-primary btn-round btn-lg">Create</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                        <button class="btn btn-success btn-md btn-round" data-toggle="modal" data-target="#{{p.id}}rate" href="#"><strong>ADD Rating</strong></button>
                                            <div class="modal fade" id="{{p.id}}rate" role="dialog">
                                                <div class="modal-dialog">
                                                    <!-- Modal content -->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Add Project Rating</h5>
                                                            <a class="nav nav-link nav-pills nav-pills-success" data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
												            </a>
                                                        </div>
                                                        <div class="modal-body">
                                                            <!--Error-->
                                                            {% if old('error') %}
                                                            <div class="text-danger">
                                                                {{ old('error') }}
                                                            </div>
                                                            {% endif %}
                                                            <!--Success-->
                                                            {% if old('success') %}
                                                            <div class="text-success">
                                                                {{ old('success') }}
                                                            </div>
                                                            {% endif %}
                                                            <form class="form-horizontal" role="form" method="POST" action="/insertProjectRating">

                                                                {{ csrfField }}
                                                                <!--Requirements-->
                                                                <div class="form-group">
                                                                    <div class="col-md-4">
                                                                        <label for="groupname" class="text-muted">Project Id</label>
                                                                        <input type="text" class="form-control" value="{{p.id}}" disabled>
                                                                        <input id="pid" name="pid" type="text" class="form-control" value="{{p.id}}" style='display:none'>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <div class="col-md-12">
                                                                        <label for="groupname" class="text-muted">Criteria</label>
                                                                        <input id="criteria" name="criteria" type="text" class="form-control" required>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label for="lastname" class="col-md-10 text-muted">Avg. score</label>
                                                                    <div class="col-md-12">
                                                                        <input id="avgScore" type="number" class="form-control"  name="avgScore" required>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label for="lastname" class="col-md-10 text-muted">Remarks</label>
                                                                    <div class="col-md-12">
                                                                        <textarea id="remarks" type="text" class="form-control"  name="remarks" required></textarea>
                                                                    </div>
                                                                </div>

                                                                <div class="footer text-center">
                                                                    <button type="submit" class="btn btn-primary btn-round btn-sm">Create</button>
                                                                </div>
                                                            </form>

                                                            <!--Display ratings-->
                                                            <div class="card-body">
                                                                {% if currentUser %}
                                                                <table class="table table-hover table-md table-striped table-responsive">
                                                                    <thead class="text-warning">
                                                                        <th><strong>Criteria</strong></th>
                                                                        <th><strong>Avg. Score</strong></th>
                                                                        <th>Created</th>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in rating %}
                                                                        <tr class="text-black">
                                                                            <td>{{item.criteria}}</td>
                                                                            <td>{{item.score}}</td>
                                                                            <td>{{item.created_at}}</td>
                                                                        </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                                {% endif %}
                            </table>
                        </div>
                    </div>
                    <!-- Project Requirements Tab End-->

										<!-- Project Requirements Tab Start-->
                    <div class="card">
                        <div class="card-header bg-primary">
                            <ul class="nav nav-tabs nav-tabs-neutral">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" role="tab">
																		Project Requirements | Must have
																		</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <table class="table table-hover table-responsive">
                                {% if currentUser %}
                                <thead class="text-primary">
                                    <th><strong>Project #</strong></th>
																		<th><strong>Must Have</strong></th>
                                    <th><strong>Deadline</strong></th>

                                    {# <th><strong>Progress (%)</strong></th> #}
                                </thead>
                                <tbody>
                                    {% for item in requirements %}
                                    <tr class="text-black">
                                        <td>{{item.projectId}}</td>
                                        <td>{{item.must_have}}</td>
                                        <td>{{item.deadline}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                                {% endif %}
                            </table>
                        </div>
                    </div>
                    <!-- Project Requirements Tab End-->
                </div>
            </div>
        </div>
    </div>
</div>
	<!-- Fruit Jam Create Group Control -->
	<div class="modal fade" id="groupControl" role="dialog">
			<div class="modal-dialog">
					<!-- Modal content -->
					<div class="modal-content">
							<div class="modal-header">
									<h5 class="modal-title">Create Groups</h5>
									<a class="nav nav-link nav-pills nav-pills-success"
										 data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
									</a>
							</div>
							<div class="modal-body">
												<!--Error-->
										{% if old('error') %}
													<div class="text-danger">
															{{ old('error') }}
													</div>
											{% endif %}
												<!--Success-->
										{% if old('success') %}
													<div class="text-success">
															{{ old('success') }}
													</div>
											{% endif %}
									<form class="form-horizontal" role="form" method="POST" action="/createGroup" enctype="multipart/form-data">

											{{ csrfField }}

											<div class="col-lg-8">
													<label for="endorsedBy" class="col-lg-12 control-label">Created by</label>
													<div class="form-group">
															<input id="endorsedBy" type="email" class="form-control" name="endorsedBy" value="{{currentUser.email}}" disabled>
													</div>
											</div>

											<div class="col-lg-4">
													<label for="groupId" class="col-lg-12 control-label">Group Id</label>
													<div class="form-group">
															<input type="number" class="form-control"  min="1" value="{{maxId}}"  disabled>
															<input id="groupId" name="groupId" type="number" class="form-control"  min="1" value="{{maxId}}" style='display:none'>
													</div>
											</div>

											<div class="col-lg-8">
													<label for="groupName" class="col-lg-12 control-label">Group Name</label>
													<div class="form-group">
															<input id="groupName" type="text" class="form-control" name="groupName"  placeholder="Example: Team Adonis"  required>
													</div>
											</div>

											<div class="col-lg-8">
	                        <label class="col-lg-12 control-label">Class Schedule</label>
													<div class="form-group">
														  <input id="startTime" name="startTime" type="text" class="form-control timepicker" placeholder="Start Time"required>
													</div>
													<div class="form-group">
														  <input id="endTime" name="endTime" type="text" class="form-control timepicker" placeholder="End Time"required>
													</div>
													<select class="selectpicker" data-size="7" data-style="btn btn-primary btn-round" name="days" id="days" required>
													    <option disabled selected>Days</option>
													    <option value="MWF">Monday | Wednesday | Friday</option>
													    <option value="TTH">Tuesday | Thursday</option>
													</select>
	                    </div>

											<div class="col-lg-4">
													<label for="groupKey" class="col-lg-12 control-label">Group Key</label>
													<div class="form-group">
															<input id="groupKey" type="number" class="form-control" name="groupKey" min="0" max="9999999999" placeholder="25462729" required>
													</div>

											</div>
											<label class="text-danger col-lg-12 control-label">{{createMessage}}</label>
											<div class="col-lg-12">
													<label for="adviser" class="col-lg-12 control-label">Adviser</label>
													<div class="form-group">
															<input id="adviser" type="email" class="form-control" name="adviser"  required>
													</div>
											</div>

											<div class="col-lg-12">
													<label for="chairman" class="col-lg-12 control-label">Chairman</label>
													<div class="form-group">
															<input id="chairman" type="email" class="form-control" name="chairman"  required>
													</div>
											</div>

                      <div class="col-lg-12">
													<label for="panelist" class="col-lg-12 control-label">Panelist</label>
													<div class="form-group">
															<input id="panelist" type="email" class="form-control" name="panelist"  required>
													</div>
											</div>

											<div class="footer text-center">
												 <button type="submit" class="btn btn-primary btn-round btn-lg">Create</button>
											</div>
									</form>

									<!--Display Created Groups-->
									<div class="card-body">
											{% if currentUser %}
													<table class="table table-hover table-md table-responsive">
															<thead class="text-warning">
																	<th><strong>Group Id</strong></th>
																	<th><strong>Class Schedule</strong></th>
																	<th><strong>Group Key</strong></th>
															</thead>
															<tbody>
																	{% for g in gc %}
																			<tr class="text-black">
																					<td>{{g.groupId}}</td>
																					<td>{{g.clSched}}</td>
																					<td>{{g.groupKey}}</td>
																			</tr>
																	{% endfor %}
															</tbody>
													</table>
											{% endif %}
									</div>
							</div>
							<div class="modal-footer"></div>
					</div>
			</div>
	</div>

{#
<div class="modal fade" id="createEndorse" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create Endorsement</h5>
                <a class="nav nav-link nav-pills nav-pills-success"
                   data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
                </a>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" role="form" method="POST" action="/submitEndorsement">

                    {{ csrfField }}

                    {% for gc in groupControl %}
                        <input id="endorseTo" name="endorseTo" value={{gc.chairman}} style="display:none;" />
                    {% endfor %}

                    <input id="studentId" name="studentId" value={{currentUser.personal_code}} style="display:none;"/>

                    <div class="col-lg-12">
                        <label for="endorsedBy" class="col-lg-12 control-label">Created by</label>
                        <div class="form-group">
                            <input id="endorsedBy" type="email" class="form-control" name="endorsedBy" value={{currentUser.email}} disabled>
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <label for="endorsedBy" class="col-lg-12 control-label">For Group</label>
                        <div class="form-group">
                            {% for gc in groupControl %}
                            <input id="groupId" type="email" class="form-control" name="groupId" value={{gc.groupId}} disabled>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <label for="project" class="col-lg-12 control-label">Description</label>
                        <div class="form-group">
                            <input id="description" type="text" class="form-control" name="description" placeholder="Describe here..." required/>
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <div class="form-group">
                            <select class="selectpicker" id="endorseType" name="endorseType" data-style="btn btn-primary btn-round btn-md" required>
                                <option disabled selected>Endorse for</option>
                                <option value='Panel meeting'>Panel meeting</option>
                                <option value='Milestone checking'>Milestone checking</option>
                                <option value='Proposal defense'>Proposal defense</option>
                                <option value='Final defense'>Final defense</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <div class="form-group">
                            <label for="project" class="col-lg-12 control-label">Deadline / Meeting</label>
                            <input type="text" class="form-control datetimepicker" name="deadline" required/>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <textarea id="notes" type="text" class="form-control" name="notes" placeholder="Additional remarks..." rows="3" required></textarea>
                    </div>

                    <div class="footer text-center">
                       <button type="submit" class="btn btn-primary btn-round btn-md">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> #}
<!-- Fruit Jam Project Control -->
<div class="modal fade" id="projectControl" role="dialog">
	<div class="modal-dialog">
			<!-- Modal content -->
			<div class="modal-content">
					<div class="modal-header">
							<h5 class="modal-title">Create Project</h5>
							<a class="nav nav-link nav-pills nav-pills-success" data-dismiss="modal" data-toggle="tooltip" aria-haspopup="true" aria-expanded="true" title="Close"><i class="now-ui-icons ui-1_simple-remove"></i>
								</a>
					</div>
					<div class="modal-body">
							<!--Error-->
							{% if old('error') %}
							<div class="text-danger">
									{{ old('error') }}
							</div>
							{% endif %}
							<!--Success-->
							{% if old('success') %}
							<div class="text-success">
									{{ old('success') }}
							</div>
							{% endif %}
							<form class="form-horizontal" role="form" method="POST" action="/createProject" enctype="multipart/form-data">

									{{ csrfField }}

									<div class="col-lg-8">
											<label for="endorsedBy" class="col-lg-12 control-label">Created by</label>
											<div class="form-group">
													<input id="endorsedBy" type="email" class="form-control" name="endorsedBy" value="{{currentUser.email}}" disabled>
											</div>
									</div>

									<div class="col-lg-8">
											<label for="groupId" class="col-lg-12 control-label">Group Id</label>
											<div class="form-group">
													<select class="selectpicker" data-size="7" data-style="btn btn-primary btn-round" name="groupId" id="groupId" required>
															<option disabled selected>Group Id | Group Name</option>
															{% for groups in gc%}
															<option value="{{groups.groupId}}">{{groups.groupId}} | {{groups.groupName}}</option>
															{% endfor %}
													</select>
											</div>
									</div>

									<div class="col-lg-8">
											<label for="projectName" class="col-lg-12 control-label">Project Name</label>
											<div class="form-group">
													<input id="projectName" type="text" class="form-control" name="projectName" placeholder="Example: Machine Learning" required>
											</div>
									</div>

									<div class="footer text-center">
											<button type="submit" class="btn btn-primary btn-round btn-lg">Create</button>
									</div>
							</form>
					</div>
			</div>
	</div>
</div>
{% endblock %}
